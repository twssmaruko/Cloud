{"ast":null,"code":"var AWS = require('./core');\n/**\n * @api private\n */\n\n\nAWS.ParamValidator = AWS.util.inherit({\n  /**\n   * Create a new validator object.\n   *\n   * @param validation [Boolean|map] whether input parameters should be\n   *     validated against the operation description before sending the\n   *     request. Pass a map to enable any of the following specific\n   *     validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   */\n  constructor: function ParamValidator(validation) {\n    if (validation === true || validation === undefined) {\n      validation = {\n        'min': true\n      };\n    }\n\n    this.validation = validation;\n  },\n  validate: function validate(shape, params, context) {\n    this.errors = [];\n    this.validateMember(shape, params || {}, context || 'params');\n\n    if (this.errors.length > 1) {\n      var msg = this.errors.join('\\n* ');\n      msg = 'There were ' + this.errors.length + ' validation errors:\\n* ' + msg;\n      throw AWS.util.error(new Error(msg), {\n        code: 'MultipleValidationErrors',\n        errors: this.errors\n      });\n    } else if (this.errors.length === 1) {\n      throw this.errors[0];\n    } else {\n      return true;\n    }\n  },\n  fail: function fail(code, message) {\n    this.errors.push(AWS.util.error(new Error(message), {\n      code: code\n    }));\n  },\n  validateStructure: function validateStructure(shape, params, context) {\n    if (shape.isDocument) return true;\n    this.validateType(params, context, ['object'], 'structure');\n    var paramName;\n\n    for (var i = 0; shape.required && i < shape.required.length; i++) {\n      paramName = shape.required[i];\n      var value = params[paramName];\n\n      if (value === undefined || value === null) {\n        this.fail('MissingRequiredParameter', 'Missing required key \\'' + paramName + '\\' in ' + context);\n      }\n    } // validate hash members\n\n\n    for (paramName in params) {\n      if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n      var paramValue = params[paramName],\n          memberShape = shape.members[paramName];\n\n      if (memberShape !== undefined) {\n        var memberContext = [context, paramName].join('.');\n        this.validateMember(memberShape, paramValue, memberContext);\n      } else if (paramValue !== undefined && paramValue !== null) {\n        this.fail('UnexpectedParameter', 'Unexpected key \\'' + paramName + '\\' found in ' + context);\n      }\n    }\n\n    return true;\n  },\n  validateMember: function validateMember(shape, param, context) {\n    switch (shape.type) {\n      case 'structure':\n        return this.validateStructure(shape, param, context);\n\n      case 'list':\n        return this.validateList(shape, param, context);\n\n      case 'map':\n        return this.validateMap(shape, param, context);\n\n      default:\n        return this.validateScalar(shape, param, context);\n    }\n  },\n  validateList: function validateList(shape, params, context) {\n    if (this.validateType(params, context, [Array])) {\n      this.validateRange(shape, params.length, context, 'list member count'); // validate array members\n\n      for (var i = 0; i < params.length; i++) {\n        this.validateMember(shape.member, params[i], context + '[' + i + ']');\n      }\n    }\n  },\n  validateMap: function validateMap(shape, params, context) {\n    if (this.validateType(params, context, ['object'], 'map')) {\n      // Build up a count of map members to validate range traits.\n      var mapCount = 0;\n\n      for (var param in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, param)) continue; // Validate any map key trait constraints\n\n        this.validateMember(shape.key, param, context + '[key=\\'' + param + '\\']');\n        this.validateMember(shape.value, params[param], context + '[\\'' + param + '\\']');\n        mapCount++;\n      }\n\n      this.validateRange(shape, mapCount, context, 'map member count');\n    }\n  },\n  validateScalar: function validateScalar(shape, value, context) {\n    switch (shape.type) {\n      case null:\n      case undefined:\n      case 'string':\n        return this.validateString(shape, value, context);\n\n      case 'base64':\n      case 'binary':\n        return this.validatePayload(value, context);\n\n      case 'integer':\n      case 'float':\n        return this.validateNumber(shape, value, context);\n\n      case 'boolean':\n        return this.validateType(value, context, ['boolean']);\n\n      case 'timestamp':\n        return this.validateType(value, context, [Date, /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'], 'Date object, ISO-8601 string, or a UNIX timestamp');\n\n      default:\n        return this.fail('UnkownType', 'Unhandled type ' + shape.type + ' for ' + context);\n    }\n  },\n  validateString: function validateString(shape, value, context) {\n    var validTypes = ['string'];\n\n    if (shape.isJsonValue) {\n      validTypes = validTypes.concat(['number', 'object', 'boolean']);\n    }\n\n    if (value !== null && this.validateType(value, context, validTypes)) {\n      this.validateEnum(shape, value, context);\n      this.validateRange(shape, value.length, context, 'string length');\n      this.validatePattern(shape, value, context);\n      this.validateUri(shape, value, context);\n    }\n  },\n  validateUri: function validateUri(shape, value, context) {\n    if (shape['location'] === 'uri') {\n      if (value.length === 0) {\n        this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,' + ' but found \"' + value + '\" for ' + context);\n      }\n    }\n  },\n  validatePattern: function validatePattern(shape, value, context) {\n    if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n      if (!new RegExp(shape['pattern']).test(value)) {\n        this.fail('PatternMatchError', 'Provided value \"' + value + '\" ' + 'does not match regex pattern /' + shape['pattern'] + '/ for ' + context);\n      }\n    }\n  },\n  validateRange: function validateRange(shape, value, context, descriptor) {\n    if (this.validation['min']) {\n      if (shape['min'] !== undefined && value < shape['min']) {\n        this.fail('MinRangeError', 'Expected ' + descriptor + ' >= ' + shape['min'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n\n    if (this.validation['max']) {\n      if (shape['max'] !== undefined && value > shape['max']) {\n        this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= ' + shape['max'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n  },\n  validateEnum: function validateRange(shape, value, context) {\n    if (this.validation['enum'] && shape['enum'] !== undefined) {\n      // Fail if the string value is not present in the enum list\n      if (shape['enum'].indexOf(value) === -1) {\n        this.fail('EnumError', 'Found string value of ' + value + ', but ' + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n      }\n    }\n  },\n  validateType: function validateType(value, context, acceptedTypes, type) {\n    // We will not log an error for null or undefined, but we will return\n    // false so that callers know that the expected type was not strictly met.\n    if (value === null || value === undefined) return false;\n    var foundInvalidType = false;\n\n    for (var i = 0; i < acceptedTypes.length; i++) {\n      if (typeof acceptedTypes[i] === 'string') {\n        if (typeof value === acceptedTypes[i]) return true;\n      } else if (acceptedTypes[i] instanceof RegExp) {\n        if ((value || '').toString().match(acceptedTypes[i])) return true;\n      } else {\n        if (value instanceof acceptedTypes[i]) return true;\n        if (AWS.util.isType(value, acceptedTypes[i])) return true;\n        if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n        acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n      }\n\n      foundInvalidType = true;\n    }\n\n    var acceptedType = type;\n\n    if (!acceptedType) {\n      acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n    }\n\n    var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' + vowel + ' ' + acceptedType);\n    return false;\n  },\n  validateNumber: function validateNumber(shape, value, context) {\n    if (value === null || value === undefined) return;\n\n    if (typeof value === 'string') {\n      var castedValue = parseFloat(value);\n      if (castedValue.toString() === value) value = castedValue;\n    }\n\n    if (this.validateType(value, context, ['number'])) {\n      this.validateRange(shape, value, context, 'numeric value');\n    }\n  },\n  validatePayload: function validatePayload(value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') return;\n    if (value && typeof value.byteLength === 'number') return; // typed arrays\n\n    if (AWS.util.isNode()) {\n      // special check for buffer/stream in Node.js\n      var Stream = AWS.util.stream.Stream;\n      if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n    } else {\n      if (typeof Blob !== void 0 && value instanceof Blob) return;\n    }\n\n    var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n\n    if (value) {\n      for (var i = 0; i < types.length; i++) {\n        if (AWS.util.isType(value, types[i])) return;\n        if (AWS.util.typeName(value.constructor) === types[i]) return;\n      }\n    }\n\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' + 'string, Buffer, Stream, Blob, or typed array object');\n  }\n});","map":{"version":3,"sources":["C:/Users/tanma/Desktop/AUT/INFS803/Project/Cloud-Computing/NewFrontEnd/node_modules/aws-sdk/lib/param_validator.js"],"names":["AWS","require","ParamValidator","util","inherit","constructor","validation","undefined","validate","shape","params","context","errors","validateMember","length","msg","join","error","Error","code","fail","message","push","validateStructure","isDocument","validateType","paramName","i","required","value","Object","prototype","hasOwnProperty","call","paramValue","memberShape","members","memberContext","param","type","validateList","validateMap","validateScalar","Array","validateRange","member","mapCount","key","validateString","validatePayload","validateNumber","Date","validTypes","isJsonValue","concat","validateEnum","validatePattern","validateUri","RegExp","test","descriptor","indexOf","acceptedTypes","foundInvalidType","toString","match","isType","slice","typeName","acceptedType","replace","vowel","castedValue","parseFloat","byteLength","isNode","Stream","stream","Buffer","isBuffer","Blob","types"],"mappings":"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","sourcesContent":["var AWS = require('./core');\n\n/**\n * @api private\n */\nAWS.ParamValidator = AWS.util.inherit({\n  /**\n   * Create a new validator object.\n   *\n   * @param validation [Boolean|map] whether input parameters should be\n   *     validated against the operation description before sending the\n   *     request. Pass a map to enable any of the following specific\n   *     validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   */\n  constructor: function ParamValidator(validation) {\n    if (validation === true || validation === undefined) {\n      validation = {'min': true};\n    }\n    this.validation = validation;\n  },\n\n  validate: function validate(shape, params, context) {\n    this.errors = [];\n    this.validateMember(shape, params || {}, context || 'params');\n\n    if (this.errors.length > 1) {\n      var msg = this.errors.join('\\n* ');\n      msg = 'There were ' + this.errors.length +\n        ' validation errors:\\n* ' + msg;\n      throw AWS.util.error(new Error(msg),\n        {code: 'MultipleValidationErrors', errors: this.errors});\n    } else if (this.errors.length === 1) {\n      throw this.errors[0];\n    } else {\n      return true;\n    }\n  },\n\n  fail: function fail(code, message) {\n    this.errors.push(AWS.util.error(new Error(message), {code: code}));\n  },\n\n  validateStructure: function validateStructure(shape, params, context) {\n    if (shape.isDocument) return true;\n\n    this.validateType(params, context, ['object'], 'structure');\n    var paramName;\n    for (var i = 0; shape.required && i < shape.required.length; i++) {\n      paramName = shape.required[i];\n      var value = params[paramName];\n      if (value === undefined || value === null) {\n        this.fail('MissingRequiredParameter',\n          'Missing required key \\'' + paramName + '\\' in ' + context);\n      }\n    }\n\n    // validate hash members\n    for (paramName in params) {\n      if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n\n      var paramValue = params[paramName],\n          memberShape = shape.members[paramName];\n\n      if (memberShape !== undefined) {\n        var memberContext = [context, paramName].join('.');\n        this.validateMember(memberShape, paramValue, memberContext);\n      } else if (paramValue !== undefined && paramValue !== null) {\n        this.fail('UnexpectedParameter',\n          'Unexpected key \\'' + paramName + '\\' found in ' + context);\n      }\n    }\n\n    return true;\n  },\n\n  validateMember: function validateMember(shape, param, context) {\n    switch (shape.type) {\n      case 'structure':\n        return this.validateStructure(shape, param, context);\n      case 'list':\n        return this.validateList(shape, param, context);\n      case 'map':\n        return this.validateMap(shape, param, context);\n      default:\n        return this.validateScalar(shape, param, context);\n    }\n  },\n\n  validateList: function validateList(shape, params, context) {\n    if (this.validateType(params, context, [Array])) {\n      this.validateRange(shape, params.length, context, 'list member count');\n      // validate array members\n      for (var i = 0; i < params.length; i++) {\n        this.validateMember(shape.member, params[i], context + '[' + i + ']');\n      }\n    }\n  },\n\n  validateMap: function validateMap(shape, params, context) {\n    if (this.validateType(params, context, ['object'], 'map')) {\n      // Build up a count of map members to validate range traits.\n      var mapCount = 0;\n      for (var param in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, param)) continue;\n        // Validate any map key trait constraints\n        this.validateMember(shape.key, param,\n                            context + '[key=\\'' + param + '\\']');\n        this.validateMember(shape.value, params[param],\n                            context + '[\\'' + param + '\\']');\n        mapCount++;\n      }\n      this.validateRange(shape, mapCount, context, 'map member count');\n    }\n  },\n\n  validateScalar: function validateScalar(shape, value, context) {\n    switch (shape.type) {\n      case null:\n      case undefined:\n      case 'string':\n        return this.validateString(shape, value, context);\n      case 'base64':\n      case 'binary':\n        return this.validatePayload(value, context);\n      case 'integer':\n      case 'float':\n        return this.validateNumber(shape, value, context);\n      case 'boolean':\n        return this.validateType(value, context, ['boolean']);\n      case 'timestamp':\n        return this.validateType(value, context, [Date,\n          /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'],\n          'Date object, ISO-8601 string, or a UNIX timestamp');\n      default:\n        return this.fail('UnkownType', 'Unhandled type ' +\n                         shape.type + ' for ' + context);\n    }\n  },\n\n  validateString: function validateString(shape, value, context) {\n    var validTypes = ['string'];\n    if (shape.isJsonValue) {\n      validTypes = validTypes.concat(['number', 'object', 'boolean']);\n    }\n    if (value !== null && this.validateType(value, context, validTypes)) {\n      this.validateEnum(shape, value, context);\n      this.validateRange(shape, value.length, context, 'string length');\n      this.validatePattern(shape, value, context);\n      this.validateUri(shape, value, context);\n    }\n  },\n\n  validateUri: function validateUri(shape, value, context) {\n    if (shape['location'] === 'uri') {\n      if (value.length === 0) {\n        this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,'\n          + ' but found \"' + value +'\" for ' + context);\n      }\n    }\n  },\n\n  validatePattern: function validatePattern(shape, value, context) {\n    if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n      if (!(new RegExp(shape['pattern'])).test(value)) {\n        this.fail('PatternMatchError', 'Provided value \"' + value + '\" '\n          + 'does not match regex pattern /' + shape['pattern'] + '/ for '\n          + context);\n      }\n    }\n  },\n\n  validateRange: function validateRange(shape, value, context, descriptor) {\n    if (this.validation['min']) {\n      if (shape['min'] !== undefined && value < shape['min']) {\n        this.fail('MinRangeError', 'Expected ' + descriptor + ' >= '\n          + shape['min'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n    if (this.validation['max']) {\n      if (shape['max'] !== undefined && value > shape['max']) {\n        this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= '\n          + shape['max'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n  },\n\n  validateEnum: function validateRange(shape, value, context) {\n    if (this.validation['enum'] && shape['enum'] !== undefined) {\n      // Fail if the string value is not present in the enum list\n      if (shape['enum'].indexOf(value) === -1) {\n        this.fail('EnumError', 'Found string value of ' + value + ', but '\n          + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n      }\n    }\n  },\n\n  validateType: function validateType(value, context, acceptedTypes, type) {\n    // We will not log an error for null or undefined, but we will return\n    // false so that callers know that the expected type was not strictly met.\n    if (value === null || value === undefined) return false;\n\n    var foundInvalidType = false;\n    for (var i = 0; i < acceptedTypes.length; i++) {\n      if (typeof acceptedTypes[i] === 'string') {\n        if (typeof value === acceptedTypes[i]) return true;\n      } else if (acceptedTypes[i] instanceof RegExp) {\n        if ((value || '').toString().match(acceptedTypes[i])) return true;\n      } else {\n        if (value instanceof acceptedTypes[i]) return true;\n        if (AWS.util.isType(value, acceptedTypes[i])) return true;\n        if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n        acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n      }\n      foundInvalidType = true;\n    }\n\n    var acceptedType = type;\n    if (!acceptedType) {\n      acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n    }\n\n    var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' +\n              vowel + ' ' + acceptedType);\n    return false;\n  },\n\n  validateNumber: function validateNumber(shape, value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') {\n      var castedValue = parseFloat(value);\n      if (castedValue.toString() === value) value = castedValue;\n    }\n    if (this.validateType(value, context, ['number'])) {\n      this.validateRange(shape, value, context, 'numeric value');\n    }\n  },\n\n  validatePayload: function validatePayload(value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') return;\n    if (value && typeof value.byteLength === 'number') return; // typed arrays\n    if (AWS.util.isNode()) { // special check for buffer/stream in Node.js\n      var Stream = AWS.util.stream.Stream;\n      if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n    } else {\n      if (typeof Blob !== void 0 && value instanceof Blob) return;\n    }\n\n    var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n    if (value) {\n      for (var i = 0; i < types.length; i++) {\n        if (AWS.util.isType(value, types[i])) return;\n        if (AWS.util.typeName(value.constructor) === types[i]) return;\n      }\n    }\n\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' +\n      'string, Buffer, Stream, Blob, or typed array object');\n  }\n});\n"]},"metadata":{},"sourceType":"script"}